{% extends "base.html" %}
{% block content %}
<article class="car-view">
  <div class="car-info">
    <h2 class="car-title">
      {{ item.brand }} {{ item.model }}
      {% if item.generation %}
        <span class="car-generation">‚Ä¢ {{ item.generation }}</span>
      {% endif %}
    </h2>
    <div class="car-meta">
      {% if item.avg_price_min and item.avg_price_max %}
        <div><b>–¶–µ–Ω–∞:</b> {{ item.avg_price_min }}‚Äì{{ item.avg_price_max }} $</div>
      {% endif %}
      {% if item.years %}<div><b>–ì–æ–¥—ã:</b> {{ item.years }}</div>{% endif %}
      {% if item.car_class %}<div><b>–ö–ª–∞—Å—Å:</b> {{ item.car_class }}</div>{% endif %}
      {% if item.country %}<div><b>–°—Ç—Ä–∞–Ω–∞:</b> {{ item.country }}</div>{% endif %}
    </div>
    <div class="car-specs">
      {% if item.body %}<div><b>–ö—É–∑–æ–≤–∞:</b> {{ item.body }}</div>{% endif %}
      {% if item.engines %}<div><b>–î–≤–∏–≥–∞—Ç–µ–ª—è:</b> {{ item.engines }}</div>{% endif %}
      {% if item.drive %}<div><b>–ü—Ä–∏–≤–æ–¥:</b> {{ item.drive }}</div>{% endif %}
      {% if item.weak_points %}<div><b>¬´–ë–æ–ª—å–Ω—ã–µ¬ª –º–µ—Å—Ç–∞:</b> {{ item.weak_points }}</div>{% endif %}
    </div>
  </div>
  {% if item.photo_filename %}
    <div class="car-photo">
      <img src="{{ url_for('static', filename='uploads/' ~ item.photo_filename) }}"
           alt="–§–æ—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è"
           onclick="openImageModal(this.src)">
    </div>
<div id="imageModal" class="image-modal" onclick="closeImageModal()">
  <img id="modalImage" class="modal-content">
</div>
  {% endif %}
  <div class="card-footer">
    <a href="{{ url_for('edit_car', car_id=item.id) }}" class="card-btn left" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</a>
    <form method="post" action="{{ url_for('delete_car', car_id=item.id) }}">
      <button type="submit" class="card-btn right danger" title="–£–¥–∞–ª–∏—Ç—å">üóëÔ∏è</button>
    </form>
  </div>
</article>
{% endblock %}
<script>
function openImageModal(src) {
  const modal = document.getElementById('imageModal');
  const img = document.getElementById('modalImage');
  img.src = src;
  modal.classList.add('show');
}
function closeImageModal() {
  document.getElementById('imageModal').classList.remove('show');
}
</script>
